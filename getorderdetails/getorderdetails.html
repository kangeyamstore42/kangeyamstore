<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Order Lookup</title>
  <style>
   


    /* Prevent horizontal scroll on mobile */
html, body {
  margin: 0;
  padding: 0;
  overflow-x: hidden; /* stop left-right move */
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #f5f7fa;
      margin: 0;
      padding: 0;
      display: flex;
      flex-direction: column;
      min-height: 100vh;
}

    /* Header Bar */
    header {
      width: 100%;
      background-color: #000; /* black header */
      padding: 15px 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.2);
      position: sticky; /* stays visible */
      top: 0;
      z-index: 1000;
    }

    header a {
      color: #fff;
      font-weight: bold;
      text-decoration: none;
      font-size: 1.1rem;
    }

    header a:hover {
      text-decoration: underline;
    }

    .container {
      background: #fff;
      max-width: 800px;
      width: 95%;
      margin: 40px auto;
      padding: 30px;
      border-radius: 10px;
      box-shadow: 0 6px 20px rgba(0,0,0,0.1);
    }

    h1 {
      text-align: center;
      font-size: 1.8rem;
      margin-bottom: 20px;
      color: #2c3e50;
    }

    input[type="text"] {
      width: 100%;
      padding: 12px;
      font-size: 1rem;
      border: 1.5px solid #ccc;
      border-radius: 6px;
      margin: 10px 0;
      max-width: 50%;
    }

    input[type="text"]:focus {
      border-color: #2980b9;
      outline: none;
      box-shadow: 0 0 5px rgba(41,128,185,0.5);
    }

    button {
      margin-top: 15px;
      width: 100%;
      padding: 12px;
      font-size: 1.1rem;
      font-weight: 600;
      border: none;
      border-radius: 6px;
      background-color: #2980b9;
      color: #fff;
      cursor: pointer;
      transition: background 0.25s ease;
    }

    button:hover {
      background-color: #1f6391;
    }

    #result {
      margin-top: 25px;
    }

    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }

    th, td {
      text-align: left;
      padding: 10px;
      border-bottom: 1px solid #ddd;
    }

    th {
      background: #f0f3f6;
      width: 30%;
    }

    tr:hover { background-color: #f9f9f9; }

    .error {
      color: red;
      font-weight: bold;
      margin-top: 15px;
    }
 /* üì± Small devices (mobiles) */
@media screen and (max-width: 600px) {
  header {
    padding: 12px 5px;
  }

  header a {
    font-size: 1.3rem;
  }

  .container {
    margin: 20px 10px;
    padding: 20px;
    max-width: 100%; 
    box-sizing: border-box;
  }

  input[type="text"] {
    width: 100%;
    max-width: 100%; 
    box-sizing: border-box;
  }

  button {
    font-size: 1rem;
    padding: 10px;
  }

  h1 {
    font-size: 1.5rem;
  }
}

/* üíª Medium devices (tablets) */
@media screen and (max-width: 900px) {
  .container {
    width: 90%;
    max-width: 100%;
    box-sizing: border-box;
  }

  input[type="text"] {
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
  }
}

/* Footer wrapper */
#footer-placeholder {
  margin-top: auto;          /* pushes footer to bottom */
  width: 100%;               /* full width */
}

/* Style inside footer.html */
footer {
  width: 100%;               /* full width */
  background-color: #000;     /* black footer */
  color: #fff;
  text-align: center;
  padding: 20px;
  box-sizing: border-box;
}


  </style>
</head>
<body>
  <!-- Black Header with Home Link -->
  <header>
    <a href="../index.html">Home</a>
  </header>

  <div class="container">
    <h1>Order Details</h1>

    <label for="orderId"><b>Enter Order ID:</b></label>
    <input id="orderId" type="text" placeholder="e.g. KS1208172345" />

    <button onclick="lookup()">Search</button>

    <div id="result"></div>
  </div>

   <div id="footer-placeholder"></div>

  
   <script>
    fetch('../footerpage/footer.html')
      .then(response => response.text())
      .then(data => {
        document.getElementById('footer-placeholder').innerHTML = data;
      })
      .catch(err => console.error('Failed to load footer:', err));
  </script>

  <script>
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwpZ1Ji6OqOvt3KfY3rg5dLedFCOFt4nawZNzwsjK_fScUmaWeSHX7Fm0G8Kw6QdpkH/exec";

  function lookup() {
    const orderId = document.getElementById("orderId").value.trim();
    const resultEl = document.getElementById("result");
    resultEl.innerHTML = "";

    if (!orderId) {
      alert("Please enter an Order ID.");
      return;
    }

    resultEl.innerHTML = "<p>üîç Searching...</p>";

    fetch(`${SCRIPT_URL}?orderID=${encodeURIComponent(orderId)}`)
      .then(res => res.json())
      .then(data => {
        resultEl.innerHTML = "";

        if (!data || data.error) {
          resultEl.innerHTML = `<p class="error">${data.error || "Order not found."}</p>`;
          return;
        }

        let table = "<table>";

        for (let key in data) {
          let value = data[key];

          if ((key === "cancel_reason" || key === "cancel_date") && (!value || String(value).trim() === "")) {
            continue;
          }

          if (key === "dateAndTime") {
            table += `
              <tr>
                <th>Ordered Date</th>
                <td>${formatDateTime(value)}</td>
              </tr>`;
            continue;
          }

          if (key === "tracking_number") {
            const trackingUrl = `https://franchexpress.com/courier-tracking/?num=${encodeURIComponent(value)}`;
            table += `
              <tr>
                <th>Courier Tracking Number</th>
                <td><a href="${trackingUrl}" target="_blank">${escapeHtml(value)}</a></td>
              </tr>`;
            continue;
          }

          if (key === "product_details") {
            table += `
              <tr>
                <th>Product Details</th>
                <td>${formatProductDetails(value)}</td>
              </tr>`;
          } else {
            table += `
              <tr>
                <th>${prettyLabel(key)}</th>
                <td>${escapeHtml(value)}</td>
              </tr>`;
          }
        }

        table += "</table>";
        resultEl.innerHTML = table;
      })
      .catch(err => {
        console.error(err);
        resultEl.innerHTML = "<p class='error'>‚ö†Ô∏è Error fetching details.</p>";
      });
  }

  function prettyLabel(key) {
    return key.replace(/_/g, " ").replace(/\b\w/g, l => l.toUpperCase());
  }

  function formatProductDetails(details) {
    if (!details) return "";
    const items = details.split(/(?=Product Code:)/);
    let html = "<ul style='padding-left:16px;'>";
    items.forEach(item => {
      const clean = item.trim();
      if (!clean) return;
      html += `<li>${escapeHtml(clean)}</li>`;
    });
    html += "</ul>";
    return html;
  }

  function escapeHtml(str) {
    if (str === null || str === undefined) return "";
    return String(str)
      .replace(/&/g, "&amp;")
      .replace(/</g, "&lt;")
      .replace(/>/g, "&gt;")
      .replace(/"/g, "&quot;")
      .replace(/'/g, "&#039;");
  }

  function formatDateTime(dateStr) {
    if (!dateStr) return "";
    const d = new Date(dateStr);
    if (isNaN(d)) return escapeHtml(dateStr);
    return d.toLocaleString("en-IN", {
      year: "numeric",
      month: "long",
      day: "numeric",
      hour: "2-digit",
      minute: "2-digit",
      second: "2-digit"
    });
  }
  </script>
  
</body>
</html>
